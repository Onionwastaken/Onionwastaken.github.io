<!DOCTYPE html>
<html>
    <head>
        <title>
            Nothing this week
          </title>
    </head>
    <body>
        <div id = "pablo"><img src="assets/images/pablo_idle.png"></img></div>
        <img src="assets/images/ancient_aspid.png">
    <script>
        const pablo = document.getElementById("pablo")
        pablo.style.position = "absolute"
        pablo.style.top      = "50%"
        pablo.style.left     = "10px"
        const dom = document.querySelector("*")  
      document.addEventListener("keydown", onKeyDown)
      document.addEventListener("keyup"  , onKeyUp  )
        dom.style.backgroundImage = "url('assets/images/screenwipe.gif')"
      let x  = 0
      let y  = 0

      let keys = { }

      function onKeyDown(ke) {
        keys[ke.key] = true
      }

      function onKeyUp(ke) {
        keys[ke.key] = false
      }

      function isKeyDown(key) {
        return keys[key] ?? false
      }

      function isKeyUp(key) {
        return !(keys[key] ?? false)
      }

      function update(t, dt) {
        if (isKeyDown("w"))
          y = y - 300 * dt

        if (isKeyDown("s"))
          y = y + 300 * dt

        if (isKeyDown("a"))
          x = x - 300 * dt

        if (isKeyDown("d"))
          x = x + 300 * dt
        
      }

      function render(t, dt) {
        pablo.style.left = x + "px"
        pablo.style.top  = y + "px"
      }

      function animate(t0, t1, t2) {
        const t  = (t2 - t0) / 1000
        const dt = (t2 - t1) / 1000
        update(t, dt)
        render(t, dt)
        
        requestAnimationFrame(t3 => animate(t0, t2, t3))
      }

      requestAnimationFrame(
        t0 => requestAnimationFrame(
          t1 => requestAnimationFrame(
            t2 => animate(t0, t1, t2))))


    </script>
    </body>
</html>